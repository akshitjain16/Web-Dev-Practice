<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <input
      oninput="debouncePopulateDiv()"
      id="firstNumber"
      type="text"
      placeholder="First Number"
    />
    <br />
    <br />
    <input
      oninput="debouncePopulateDiv()"
      id="secondNumber"
      type="text"
      placeholder="Second Number"
    /><br /><br />
    <button>Calculate Sum</button> <br /><br />
    <div id="finalSum"></div>

    <script>
      // document

      //debouncing - delay in sending request to backend
      let timeout;
      function debouncePopulateDiv() {
        //delay call to populateDiv until i have been called for 100ms and i have been called once
        // cancel a clock and clear timeout
        clearTimeout(timeout);
        timeout = setTimeout(() => {
          populateDiv()
        }, 1000);
      }

      function populateDiv() {
        // throttling
        const a = document.getElementById("firstNumber").value;
        const b = document.getElementById("secondNumber").value;
        // const element = document.getElementById("finalSum");
        // element.innerHTML = parseInt(a) + parseInt(b)

        //using backend logic or connecing froneted and backend or hitting backend when button is clicked

        //fetch- one way of doing this
        fetch("https://localhost:3000/sum?a=" + a + " &b=" + b).then(
          (response) => {
            console.log(response);
            // to get text data a promise is returned
            response.text().then((ans) => {
              console.log(ans);
              //using dom to render element on frontend
              document.getElementById("finalSum").innerHTML = ans;
            });
          }
        );

        // easier or clear syntax - async await
        async function populateDiv2() {
          const a = document.getElementById("firstNumber").value;
          const b = document.getElementById("secondNumber").value;
          const response = await fetch(
            "https://localhost:3000/sum?a=" + a + " &b=" + b
          );
          const ans = await response.text();

          document.getElementById("finalSum").innerHTML = ans;

          //axios - another better way to do this
          const response2 = await axois.get(
            "https://localhost:3000/sum?a=" + a + " &b=" + b
          );
          response2.data;
        }
      }
    </script>
  </body>
</html>
